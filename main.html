<!DOCTYPE html>
<html lang="en">
<style>
  #my-lucky{margin:0 auto} 
</style>
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="my-lucky"></div>
  <script src="https://cdn.jsdelivr.net/npm/lucky-canvas@1.5/dist/lucky-canvas.umd.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://www.layuicdn.com/layui/css/layui.css"/>
    <script src="https://www.layuicdn.com/layui/layui.js"></script>
  <script>
    let luckyNum = 100
    // 创建九宫格抽奖
    let luckyGrid = new LuckyCanvas.LuckyGrid({
      el: '#my-lucky',
      width: '800px',
      height: '800px'
    }, {
      blocks: [
        { padding: '15px', background: '#ffc27a', borderRadius: 28 },
        { padding: '4px', background: '#ff4a4c', borderRadius: 23 },
        { padding: '4px', background: '#ff625b', borderRadius: 20 },
      ],
      buttons: [{
        x: 1, y: 1,
        background: 'linear-gradient(270deg, #FFFFFF, #FFFFFF)',
        shadow: '0 5 1 #e89b4f',
        fonts: [
          { text: `${luckyNum} 次`, fontColor: '#fff', top: '73%', fontSize: '30px' },
        ],
        imgs: [
          { src: 'https://z3.ax1x.com/2021/11/05/IuCgP0.png', width: '65%', top: '12%' },
          { src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAgCAYAAAB0OKThAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NDUyYzFkZi0wMzBkLTQ4M2YtODQ2ZC05ZmZiNzA4ODk4YTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEQ3QUEzNTVERDlEMTFFQUFFMjlEOENEMjk2NkNCQjYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEQ3QUEzNTRERDlEMTFFQUFFMjlEOENEMjk2NkNCQjYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDplN2M2ZDZjNi1kNTUwLTQzMjMtODViOS02N2E1NzU0ZThmMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDQ1MmMxZGYtMDMwZC00ODNmLTg0NmQtOWZmYjcwODg5OGEwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+6LYfBAAAAetJREFUeNrsmrFLAmEYhz8PLMOylnAO3YKKliBcwiWsIWipvX/AJRsd06X+gJprqK2iRVqKtgjBKaVZXErLiob6vfkeqF3nmd59g+8Dz6Quz53ffXf3+r4W15RDRuEKXIJzcAqOw2E1uHzAZ/gI7+EVPIcvTn7scxA/ClNwEwaV0IlXeAQzsGj3RcPmswDchQW4JeEdE+ReBT4AgW7jR+Atn/FD0vNfULdt7hh1Gn8e3vC6LvQOdbzmrrbx6QhdwrA06yth7hr9K/4IPIGT0soVqOspd/4VPw1npZGrzHDnlvh0gU1KG09ImsuPGX8H+qWLJ/i590/8Mb6BErxjg7pT/ITcQGm5EUtQ/Li00ELc4CuwoGHnY/BOR/CeCMUPSQcthAxpoA+KX5UMWqhS/JJ00EKJ4uelgxbyFD8nHbSQo/gXqvHeUfCOOnWn+DV4LD08hV6w18ytJr0o/5QmnkCdM+ZWk6ARhz3p4gn78KE5PpGWnY/7Oxxl8SaLeIPrsCKNXKHCfetW8c3lZxmWpVVfKXPXYvvjhXbuYEyWoL4uNTHuqjrFN/8BCzAru6CedjVZ7mg5s2n3VPNdNcYFp+FB81ol2ELXzkPuluKOlvi6HBFfVa0j4hNqsKce6Ox+Uq0j4mfK4Yj4twADAFPnVt8Y9zydAAAAAElFTkSuQmCC', width: '50%', top: '73%' }
        ]
      }],
      activeStyle: {
        background: 'linear-gradient(270deg, #FFDCB8, #FDC689)',
        shadow: ''
      },
      defaultConfig: {
        gutter: 5,
      },
      defaultStyle: {
        borderRadius: 75,
        fontColor: '#DF424B',
        fontSize: '14px',
        textAlign: 'center',
        background: '#fff',
        shadow: '0 5 1 #ebf1f4'
      },
      start () {
        if (!luckyNum) return alert('还剩0次抽奖机会')
        luckyGrid.play()
        setTimeout(() => {
          luckyGrid.stop(Math.random() * 8 >> 0)
        }, 2000)
      },
      end (prize) {
	  layer.msg(`恭喜你获得大奖: ${prize.name}`, {icon: 1});
        luckyNum--
        luckyGrid.buttons[0].fonts[0].text = `${luckyNum} 次`
      }
    })
    // 模拟接口异步请求奖品列表
    setTimeout(() => {
      const prizes = []
      const data = [
        { name: 'Eva奖励5美元', img: 'https://img-pre.ivsky.com/img/tupian/pre/201901/03/meiyuan_chaopiao-001.jpg' },
        { name: 'Eva石头剪刀布', img: 'https://img2.baidu.com/it/u=3080583859,3738170272&fm=26&fmt=auto' },
		{ name: 'Eva奖励10美元', img: 'https://img0.baidu.com/it/u=1825973045,4244606904&fm=26&fmt=auto' },
        { name: '转三圈加8分', img: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F18%2F06%2F10%2F0881e066df24c93617bcbc70a90245f8.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638519908&t=984cce941dc560fdfef99c5aa6cace67' },
        { name: 'Eva奖励15美元 ', img: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic5.997788.com%2Fpic_search%2F00%2F22%2F14%2F40%2Fse22144065.jpg&refer=http%3A%2F%2Fpic5.997788.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638687285&t=9092bd0c2470f8eb0e8119b6c77f5ded' },
        { name: 'Eva石头剪刀布', img: 'https://img2.baidu.com/it/u=3080583859,3738170272&fm=26&fmt=auto' },
        { name: '打Eva屁股', img: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimagev2.xmcdn.com%2Fgroup9%2FM07%2FE7%2F00%2FwKgDYlaaPMPTf6WIAADjm0SNc0A741.jpg%3Fop_type%3D3%26device_type%3Dios%26name%3Dweb_meduim%26columns%3D72%26rows%3D72&refer=http%3A%2F%2Fimagev2.xmcdn.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638519970&t=b5791a82da153aa7e2da0035ea1265c3' },
        { name: '读三遍加10分 ', img: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20191128%2Fece6c0eef8c04019b133c82740601ce8.jpeg&refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638520114&t=56985be200e7690b05ab3b23176678d7' }
      ]
      let axis = [[0, 0], [1, 0], [2, 0], [2, 1], [2, 2], [1, 2], [0, 2], [0, 1]]
      for (let i = 0; i < 8; i++) {
        let item = data[i]
        prizes.push({
          name: item.name,
          index: i, x: axis[i][0], y: axis[i][1],
          fonts: [{ text: item.name, top: '70%' }],
          imgs: [{ src: item.img, width: '53%', top: '8%' }]
        })
      }
      luckyGrid.prizes = prizes
    })
  </script>
</body>
</html>
